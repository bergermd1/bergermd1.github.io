<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="style 2.css">
</head>
<body>
    <script src="./recipe search/recipe search.js"></script>
    <!-- <script src="./recipe search/ingredient search.js"></script> -->

    <div class="title-container">
        <img src="Images/World Map Spices 2.jpg" class="title-image">
        <h1 class="title">Around the World in 197 Plates</h1>
    </div>
    <nav class="navigation">
        <ul class="nav-list">
            <li class="nav-item">
                <a href="/index 3.html">Home</a>
            </li>
            <li class="nav-item">|</li>
            <li class="nav-item">
                <a href="/donate.html">Donate</a>
            </li>
            <li class="nav-item">|</li>
            <li class="nav-item">
                <a href="/World Map test 3.html">World Recipe Map</a>
            </li>
            <li class="nav-item">|</li>
            <li class="nav-item">
                <a href="#">Recipe Search</a>
            </li>
        </ul>
    </nav>

    <!-- <input type="text" id="searchbox"> -->
    <!-- <button onclick="search()">Search</button> -->
    
    <input id="searchbox">
    <div class="search-container">
        <div class="search-left-panel">
            <p id="ingredient-results"></p>
        </div>
        <div class="search-right-panel">
            <p id="country-results"></p>
        </div>
    </div>
    <!-- <br><br><br> -->

    <script>
        //initialize  all ingredient checkbox results and set display to none
        document.getElementById('ingredient-results').innerHTML = getIngredientListHTML();

        const searchbox = document.getElementById('searchbox');
        
        // const result = document.getElementById('result');

        //to update search results every time the input changes
        searchbox.addEventListener('input', search);
        
        getIngredientListArray().forEach(element => {
            document.getElementById(`${element}checkbox`).addEventListener('change', () => {
                // console.log(getSearchResultHTML(getCountriesFromIngredients(getCheckedIngredients())));
                document.getElementById('country-results').innerHTML = getSearchResultHTML(getCountriesFromIngredients(getCheckedIngredients()));    
            })
        })

        function search() {
            // searchCountries();
            searchIngredients();
        }

        function searchCountries() {
            const results = getCountrySearchResults(document.getElementById('searchbox').value);
            // document.getElementById('country-results').innerHTML = results;
        }

        //display all ingredients that match current search input 
        function searchIngredients() {
            
            //blank all current search results
            getIngredientListArray().forEach(element => {
                document.getElementById(`${element}checkbox`).style.display = "none";
                document.getElementById(`${element}label`).style.display = "none";
            })

            //make visible only new search results
            const results = getIngredientSearchResults(document.getElementById('searchbox').value);
            results.forEach(element => {
                document.getElementById(`${element}checkbox`).style.display = "inline-block";
                document.getElementById(`${element}label`).style.display = "inline-block"; 
            });
            // document.getElementById('country-results').innerHTML = getCountriesFromIngredients(getCheckedIngredients());
        }

        //return array of all currently checked ingredients
        function getCheckedIngredients() {
            let checkedIngredients = [];
            getIngredientListArray().forEach(element => {
                if (document.getElementById(`${element}checkbox`).checked) {
                    checkedIngredients.push(element);
                }
            })
            return checkedIngredients;
        }

    </script>

</body>
